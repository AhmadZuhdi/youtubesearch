{"version":3,"sources":["../src/youtubeSearch.js"],"names":[],"mappings":"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","file":"src/youtubeSearch.js","sourcesContent":["/*\n* @Author: AhmadZuhdi\n* @Date:   2015-10-12 22:02:03\n* @Last Modified by:   AhmadZuhdi\n* @Last Modified time: 2015-10-12 23:43:33\n*/\n\n'use strict';\n\n(function (root, factory){\n\n  /**\n   * common js support\n   */\n  if(typeof module === \"object\" && module.exports){\n    var fetch = require('node-fetch')\n    var bluebird = require('bluebird')\n    require('es6-shim')\n    module.exports = factory(fetch, bluebird)\n  } else {\n\n    root.youtubeSearch = factory(window.fetch)\n  }\n\n})(this, function (fetch, bluebird){\n\n  class helper {\n\n    constructor(){\n     this.ytUrl = 'https://www.googleapis.com/youtube/v3/search'\n    }\n\n    queryBuilder(parameters){\n\n      let newParameters = ''\n\n      for(let parameter in parameters) {\n        let value = parameters[parameter]\n        newParameters += `${parameter}=${value}&`\n      }\n\n      return `${this.ytUrl}?${newParameters}`\n    }\n  }\n\n  class youtubeRecord {\n\n    constructor(data, options) {\n      this.helper = new helper()\n      this.data = {}\n      this.currentPage = 1\n      this.data[this.currentPage] = data\n      this.options = options\n    }\n\n    getData(page = this.currentPage){\n      return this.data[page]\n    }\n\n    nextPage(){\n\n      const dataCurrentPage = this.getData()\n      const nextPageToken = dataCurrentPage.nextPageToken\n\n      let newOptions = Object.assign({}, this.options)\n      let newUrl;\n\n      newOptions.pageToken = nextPageToken\n\n      newUrl = this.helper.queryBuilder(newOptions)\n\n      return new Promise((resolve, reject) => {\n        fetch(newUrl)\n        .then(res => res.json())\n        .then(res => resolve(new youtubeRecord(res, newOptions)))\n      })\n    }\n\n    prevPage(){\n\n      const dataCurrentPage = this.getData()\n      const prevPageToken = dataCurrentPage.prevPageToken\n\n      let newOptions = Object.assign({}, this.options)\n      let newUrl;\n\n      newOptions.pageToken = prevPageToken\n\n      newUrl = this.helper.queryBuilder(newOptions)\n\n      return new Promise((resolve, reject) => {\n        fetch(newUrl)\n        .then(res => res.json())\n        .then(res => resolve(new youtubeRecord(res, newOptions)))\n      })\n    }\n  }\n\n  class youtubeSearch {\n\n    constructor({ apiKey = '' }){\n      this.apiKey = apiKey\n      this.helper = new helper()\n    }\n\n    search(query, options = {}){\n      options.q = query\n      options.key = this.apiKey\n      let url = this.helper.queryBuilder(options)\n\n      return new Promise((resolve, reject) => {\n        fetch(url)\n        .then(res => res.json())\n        .then(res => resolve(new youtubeRecord(res, options)))\n      })\n    }\n  }\n\n  return youtubeSearch\n})"]}